#!/bin/sh
mpc random on
mpc repeat on

if [ "$1" = "search" ]
then
    type=$(printf "album\ntrack" | dmenu -p "Type:")
    if [ -z "$type" ]
    then
        exit
    fi

    echo "" | dmenu -p "Search:" | xargs -r -I {} mpc search any "{}" | grep "$type" | mpc add

    if [ "$(mpc | wc -l)" -eq 1 ]
    then
        mpc play
    fi
elif [ "$1" = "volume" ]
then
    mpc volume "$2"
else
    if [ ! "$(mpc queued)" ]
    then
        mpc lsplaylists | dmenu | xargs -r mpc load
    fi

    if [ ! "$1" ]
    then
        exit 0
    fi

    mpc "$1"
fi

